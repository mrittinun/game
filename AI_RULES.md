# AI Rules - à¸à¸à¸ªà¸³à¸«à¸£à¸±à¸š AI Development

> à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸à¸³à¸«à¸™à¸”à¸à¸à¹à¸¥à¸°à¹à¸™à¸§à¸—à¸²à¸‡à¸ªà¸³à¸«à¸£à¸±à¸š AI tools (à¹€à¸Šà¹ˆà¸™ Kiro, Cursor, GitHub Copilot) à¹ƒà¸™à¸à¸²à¸£à¸à¸±à¸’à¸™à¸²à¹‚à¸›à¸£à¹€à¸ˆà¸„à¹€à¸à¸¡à¸™à¸µà¹‰

## ğŸ¯ à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ

à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸Šà¹ˆà¸§à¸¢à¹ƒà¸«à¹‰ AI:
1. à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸‚à¹‰à¸­à¸ˆà¸³à¸à¸±à¸”à¹à¸¥à¸°à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¸‚à¸­à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¸„
2. à¸ªà¸£à¹‰à¸²à¸‡ code à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹à¸¥à¸°à¸£à¸­à¸‡à¸£à¸±à¸šà¸¡à¸·à¸­à¸–à¸·à¸­
3. à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸—à¸µà¹ˆà¸à¸šà¸šà¹ˆà¸­à¸¢
4. à¸£à¸±à¸à¸©à¸²à¸¡à¸²à¸•à¸£à¸à¸²à¸™ code quality

---

## ğŸš¨ à¸à¸à¸šà¸±à¸‡à¸„à¸±à¸šà¸—à¸µà¹ˆà¸«à¹‰à¸²à¸¡à¸¥à¸°à¹€à¸¡à¸´à¸”

### 1. Game Engine Rules

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³
- à¹ƒà¸Šà¹‰ **Phaser 3** à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™à¸ªà¸³à¸«à¸£à¸±à¸š game engine
- à¹ƒà¸Šà¹‰ **Next.js** à¸ªà¸³à¸«à¸£à¸±à¸š framework
- à¹ƒà¸Šà¹‰ **TypeScript** à¸ªà¸³à¸«à¸£à¸±à¸š type safety
- à¹ƒà¸Šà¹‰ **Tailwind CSS** à¸ªà¸³à¸«à¸£à¸±à¸š styling (à¸™à¸­à¸ Phaser)

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ game engine à¸­à¸·à¹ˆà¸™ (Unity, Godot, PixiJS, etc.)
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ Phaser 2 à¸«à¸£à¸·à¸­ Phaser CE
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ JavaScript à¹à¸—à¸™ TypeScript
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ CSS framework à¸­à¸·à¹ˆà¸™

### 2. Mobile Support Rules

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³
- à¸£à¸­à¸‡à¸£à¸±à¸šà¸¡à¸·à¸­à¸–à¸·à¸­ (iOS, Android) **à¹€à¸ªà¸¡à¸­**
- à¸£à¸­à¸‡à¸£à¸±à¸šà¹à¸—à¹‡à¸šà¹€à¸¥à¹‡à¸•à¹à¸¥à¸° iPad **à¹€à¸ªà¸¡à¸­**
- à¸£à¸­à¸‡à¸£à¸±à¸š landscape mode **à¹€à¸ªà¸¡à¸­**
- à¹ƒà¸Šà¹‰ responsive scaling **à¹€à¸ªà¸¡à¸­**
- à¸£à¸­à¸‡à¸£à¸±à¸š touch input **à¹€à¸ªà¸¡à¸­**

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³
- à¸«à¹‰à¸²à¸¡à¸ªà¸£à¹‰à¸²à¸‡ code à¸—à¸µà¹ˆà¸—à¸³à¸‡à¸²à¸™à¹€à¸‰à¸à¸²à¸° desktop
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ mouse-only interactions
- à¸«à¹‰à¸²à¸¡à¸ªà¸£à¹‰à¸²à¸‡ UI à¸—à¸µà¹ˆà¹„à¸¡à¹ˆ responsive
- à¸«à¹‰à¸²à¸¡à¸¥à¸°à¹€à¸¥à¸¢ safe areas

### 3. UI Positioning Rules

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³
- à¹ƒà¸Šà¹‰ **relative positioning** (camera bounds, percentages)
- à¹ƒà¸Šà¹‰ **safe zones** à¸ªà¸³à¸«à¸£à¸±à¸š UI placement
- à¹ƒà¸Šà¹‰ **responsive scaling** à¸ªà¸³à¸«à¸£à¸±à¸š UI elements
- à¹ƒà¸Šà¹‰ **Container** à¸ªà¸³à¸«à¸£à¸±à¸š UI groups

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ fixed pixel positioning
- à¸«à¹‰à¸²à¸¡à¸§à¸²à¸‡ UI à¸Šà¸´à¸”à¸‚à¸­à¸šà¸«à¸™à¹‰à¸²à¸ˆà¸­
- à¸«à¹‰à¸²à¸¡à¸ªà¸£à¹‰à¸²à¸‡ UI à¸—à¸µà¹ˆà¸«à¸¥à¸¸à¸”à¸ˆà¸­
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ absolute values à¹‚à¸”à¸¢à¹„à¸¡à¹ˆ scale

### 4. Phaser Configuration Rules

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³
- à¹ƒà¸Šà¹‰ `Phaser.Scale.FIT` **à¹€à¸ªà¸¡à¸­**
- à¹ƒà¸Šà¹‰ `Phaser.Scale.CENTER_BOTH` **à¹€à¸ªà¸¡à¸­**
- à¸•à¸±à¹‰à¸‡à¸‚à¸™à¸²à¸”à¹€à¸à¸¡ 1280x720 (16:9)
- à¹€à¸à¸´à¹ˆà¸¡ resize handler **à¹€à¸ªà¸¡à¸­**

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ scale mode à¸­à¸·à¹ˆà¸™
- à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ auto center à¸­à¸·à¹ˆà¸™
- à¸«à¹‰à¸²à¸¡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸‚à¸™à¸²à¸”à¹€à¸à¸¡à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸¡à¸µà¹€à¸«à¸•à¸¸à¸œà¸¥
- à¸«à¹‰à¸²à¸¡à¸¥à¸·à¸¡ resize handler

---

## ğŸ“ Coding Standards

### 1. File Organization

#### âœ… à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡

```
web-game/
â”œâ”€â”€ app/                    # Next.js pages
â”œâ”€â”€ components/             # React components
â”œâ”€â”€ scenes/                 # Phaser scenes
â”‚   â”œâ”€â”€ PreloadScene.ts
â”‚   â”œâ”€â”€ MenuScene.ts
â”‚   â”œâ”€â”€ BattleScene.ts
â”‚   â””â”€â”€ UIScene.ts
â”œâ”€â”€ game/                   # Game logic
â”‚   â”œâ”€â”€ entities/           # Game entities
â”‚   â”‚   â”œâ”€â”€ Player.ts
â”‚   â”‚   â”œâ”€â”€ Enemy.ts
â”‚   â”‚   â””â”€â”€ Skill.ts
â”‚   â”œâ”€â”€ systems/            # Game systems
â”‚   â”‚   â”œâ”€â”€ BattleSystem.ts
â”‚   â”‚   â”œâ”€â”€ TurnSystem.ts
â”‚   â”‚   â””â”€â”€ DamageSystem.ts
â”‚   â”œâ”€â”€ managers/           # Managers
â”‚   â”‚   â”œâ”€â”€ GameManager.ts
â”‚   â”‚   â”œâ”€â”€ UIManager.ts
â”‚   â”‚   â””â”€â”€ AudioManager.ts
â”‚   â””â”€â”€ config/             # Configuration
â”‚       â”œâ”€â”€ gameConfig.ts
â”‚       â””â”€â”€ constants.ts
â”œâ”€â”€ lib/                    # Utilities
â””â”€â”€ public/                 # Assets
    â”œâ”€â”€ sprites/
    â”œâ”€â”€ sounds/
    â””â”€â”€ ui/
```

### 2. Scene Structure

#### âœ… à¸•à¹‰à¸­à¸‡à¸¡à¸µà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸™à¸µà¹‰

```typescript
export class BattleScene extends Phaser.Scene {
  // Properties
  private player?: Player;
  private enemy?: Enemy;
  private uiManager?: UIManager;
  
  constructor() {
    super({ key: "BattleScene" });
  }
  
  // Lifecycle methods
  init(data?: any) {
    // Initialize scene data
  }
  
  preload() {
    // Load assets (if needed)
  }
  
  create() {
    // Setup scene
    this.setupCamera();
    this.setupUI();
    this.setupEntities();
    this.setupInput();
  }
  
  update(time: number, delta: number) {
    // Game loop
  }
  
  // Private methods
  private setupCamera() {
    // Camera setup
  }
  
  private setupUI() {
    // UI setup with safe zones
    const { width, height } = this.cameras.main;
    const safe = { top: 60, bottom: 60, left: 40, right: 40 };
    // ...
  }
  
  private setupEntities() {
    // Entity setup
  }
  
  private setupInput() {
    // Input setup (touch + mouse)
  }
  
  // Public methods
  public cleanup() {
    // Cleanup before scene change
  }
}
```

### 3. TypeScript Standards

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
// à¹ƒà¸Šà¹‰ interfaces à¸ªà¸³à¸«à¸£à¸±à¸š data structures
interface PlayerData {
  id: string;
  name: string;
  hp: number;
  maxHp: number;
  mp: number;
  maxMp: number;
}

// à¹ƒà¸Šà¹‰ types à¸ªà¸³à¸«à¸£à¸±à¸š unions
type SkillType = "attack" | "heal" | "buff" | "debuff";

// à¹ƒà¸Šà¹‰ enums à¸ªà¸³à¸«à¸£à¸±à¸š constants
enum BattleState {
  IDLE = "idle",
  PLAYER_TURN = "player_turn",
  ENEMY_TURN = "enemy_turn",
  ANIMATING = "animating",
  GAME_OVER = "game_over",
}

// à¹ƒà¸Šà¹‰ generics à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
class EventEmitter<T> {
  private listeners: Map<string, ((data: T) => void)[]> = new Map();
  
  on(event: string, callback: (data: T) => void) {
    // ...
  }
}

// à¹ƒà¸Šà¹‰ readonly à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
class GameConfig {
  readonly GAME_WIDTH = 1280;
  readonly GAME_HEIGHT = 720;
  readonly SAFE_ZONE_TOP = 60;
}
```

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³

```typescript
// âŒ à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ any
function processData(data: any) { }

// âœ… à¹ƒà¸Šà¹‰ proper types
function processData(data: PlayerData) { }

// âŒ à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰ var
var count = 0;

// âœ… à¹ƒà¸Šà¹‰ const/let
const count = 0;
let mutableCount = 0;

// âŒ à¸«à¹‰à¸²à¸¡à¸¥à¸° type annotations
function calculate(a, b) {
  return a + b;
}

// âœ… à¸£à¸°à¸šà¸¸ types
function calculate(a: number, b: number): number {
  return a + b;
}
```

### 4. Naming Conventions

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
// Classes: PascalCase
class BattleManager { }
class PlayerEntity { }

// Interfaces: PascalCase with I prefix (optional)
interface ISkillData { }
interface PlayerStats { }

// Functions/Methods: camelCase
function calculateDamage() { }
private updateHealthBar() { }

// Constants: UPPER_SNAKE_CASE
const MAX_HEALTH = 100;
const SKILL_COOLDOWN = 3000;

// Variables: camelCase
let playerHealth = 100;
const enemyPosition = { x: 0, y: 0 };

// Private properties: camelCase with _ prefix
private _internalState: string;

// Files: kebab-case
battle-scene.ts
player-entity.ts
damage-calculator.ts
```

---

## ğŸ® Game Development Rules

### 1. Scene Management

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
// à¹à¸¢à¸ scenes à¸•à¸²à¸¡à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ
class PreloadScene extends Phaser.Scene {
  // à¹‚à¸«à¸¥à¸” assets à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
}

class MenuScene extends Phaser.Scene {
  // à¹à¸ªà¸”à¸‡ menu à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
}

class BattleScene extends Phaser.Scene {
  // à¸ˆà¸±à¸”à¸à¸²à¸£ battle logic à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
}

class UIScene extends Phaser.Scene {
  // à¸ˆà¸±à¸”à¸à¸²à¸£ UI overlay à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
}

// à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ scene à¸­à¸¢à¹ˆà¸²à¸‡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
this.scene.start("BattleScene", { level: 1 });

// à¸£à¸±à¸™ scene à¹à¸šà¸š parallel
this.scene.launch("UIScene");
this.scene.bringToTop("UIScene");
```

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³

```typescript
// âŒ à¸«à¹‰à¸²à¸¡à¹ƒà¸ªà¹ˆà¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¹ƒà¸™ scene à¹€à¸”à¸µà¸¢à¸§
class GameScene extends Phaser.Scene {
  // à¹‚à¸«à¸¥à¸” assets, à¹à¸ªà¸”à¸‡ menu, battle, UI à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸™ scene à¹€à¸”à¸µà¸¢à¸§
}

// âŒ à¸«à¹‰à¸²à¸¡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ scene à¹‚à¸”à¸¢à¹„à¸¡à¹ˆ cleanup
this.scene.start("NextScene");  // à¹„à¸¡à¹ˆà¸¡à¸µ cleanup
```

### 2. Asset Management

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
class PreloadScene extends Phaser.Scene {
  preload() {
    // à¹à¸ªà¸”à¸‡ loading bar
    this.createLoadingBar();
    
    // à¹‚à¸«à¸¥à¸” assets à¹à¸šà¸šà¸¡à¸µà¸£à¸°à¹€à¸šà¸µà¸¢à¸š
    this.loadSprites();
    this.loadAudio();
    this.loadUI();
    
    // Listen to progress
    this.load.on("progress", (value: number) => {
      this.updateLoadingBar(value);
    });
  }
  
  private loadSprites() {
    // Group related assets
    this.load.image("player-idle", "/sprites/player/idle.png");
    this.load.image("player-attack", "/sprites/player/attack.png");
    
    // Use atlas for multiple sprites
    this.load.atlas(
      "characters",
      "/sprites/characters.png",
      "/sprites/characters.json"
    );
  }
  
  private loadAudio() {
    // Preload audio
    this.load.audio("bgm-battle", "/sounds/bgm/battle.mp3");
    this.load.audio("sfx-hit", "/sounds/sfx/hit.mp3");
  }
}
```

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³

```typescript
// âŒ à¸«à¹‰à¸²à¸¡à¹‚à¸«à¸¥à¸” assets à¹ƒà¸™ create()
create() {
  this.load.image("sprite", "/sprite.png");  // à¸œà¸´à¸”!
}

// âŒ à¸«à¹‰à¸²à¸¡à¹‚à¸«à¸¥à¸”à¸—à¸µà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œà¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸ˆà¸±à¸”à¸à¸¥à¸¸à¹ˆà¸¡
this.load.image("sprite1", "/sprite1.png");
this.load.image("sprite2", "/sprite2.png");
// ... 100 files
```

### 3. Entity Management

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
// à¸ªà¸£à¹‰à¸²à¸‡ base class
abstract class Entity extends Phaser.GameObjects.Container {
  protected hp: number;
  protected maxHp: number;
  protected sprite: Phaser.GameObjects.Sprite;
  
  constructor(scene: Phaser.Scene, x: number, y: number) {
    super(scene, x, y);
    scene.add.existing(this);
  }
  
  abstract takeDamage(amount: number): void;
  abstract heal(amount: number): void;
  
  protected updateHealthBar() {
    // Update health bar
  }
}

// Extend à¸ªà¸³à¸«à¸£à¸±à¸š specific entities
class Player extends Entity {
  private skills: Skill[];
  
  takeDamage(amount: number) {
    this.hp = Math.max(0, this.hp - amount);
    this.updateHealthBar();
    this.playHitAnimation();
  }
  
  useSkill(skillIndex: number) {
    const skill = this.skills[skillIndex];
    if (skill && skill.canUse()) {
      skill.use();
    }
  }
}

class Enemy extends Entity {
  private aiController: AIController;
  
  takeDamage(amount: number) {
    this.hp = Math.max(0, this.hp - amount);
    this.updateHealthBar();
    this.playHitAnimation();
  }
  
  selectAction(): Action {
    return this.aiController.selectAction(this);
  }
}
```

### 4. UI Management

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
class UIManager {
  private scene: Phaser.Scene;
  private containers: Map<string, Phaser.GameObjects.Container>;
  private safeZones: SafeZones;
  
  constructor(scene: Phaser.Scene) {
    this.scene = scene;
    this.calculateSafeZones();
    this.containers = new Map();
  }
  
  private calculateSafeZones() {
    const { width, height } = this.scene.cameras.main;
    this.safeZones = {
      top: 60,
      bottom: 60,
      left: 40,
      right: 40,
      width: width - 80,
      height: height - 120,
    };
  }
  
  createHealthBar(x: number, y: number): HealthBar {
    // à¹ƒà¸Šà¹‰ safe zones
    const safeX = Math.max(x, this.safeZones.left);
    const safeY = Math.max(y, this.safeZones.top);
    
    const healthBar = new HealthBar(this.scene, safeX, safeY);
    this.containers.set("healthBar", healthBar);
    
    return healthBar;
  }
  
  resize() {
    // Recalculate safe zones
    this.calculateSafeZones();
    
    // Update all UI positions
    this.containers.forEach((container) => {
      container.updatePosition(this.safeZones);
    });
  }
  
  cleanup() {
    this.containers.forEach((container) => container.destroy());
    this.containers.clear();
  }
}
```

---

## ğŸ”§ Performance Rules

### 1. Object Pooling

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
class ProjectilePool {
  private pool: Phaser.GameObjects.Sprite[];
  private scene: Phaser.Scene;
  
  constructor(scene: Phaser.Scene, size: number) {
    this.scene = scene;
    this.pool = [];
    
    // Pre-create objects
    for (let i = 0; i < size; i++) {
      const projectile = scene.add.sprite(0, 0, "projectile");
      projectile.setActive(false);
      projectile.setVisible(false);
      this.pool.push(projectile);
    }
  }
  
  spawn(x: number, y: number): Phaser.GameObjects.Sprite | null {
    const projectile = this.pool.find(p => !p.active);
    
    if (projectile) {
      projectile.setPosition(x, y);
      projectile.setActive(true);
      projectile.setVisible(true);
      return projectile;
    }
    
    return null;
  }
  
  despawn(projectile: Phaser.GameObjects.Sprite) {
    projectile.setActive(false);
    projectile.setVisible(false);
  }
}
```

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³

```typescript
// âŒ à¸«à¹‰à¸²à¸¡à¸ªà¸£à¹‰à¸²à¸‡ object à¹ƒà¸«à¸¡à¹ˆà¸—à¸¸à¸à¸„à¸£à¸±à¹‰à¸‡
function shootProjectile() {
  const projectile = this.add.sprite(x, y, "projectile");
  // à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸«à¸¡à¹ˆà¸—à¸¸à¸à¸„à¸£à¸±à¹‰à¸‡ = memory leak
}
```

### 2. Event Management

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
class BattleScene extends Phaser.Scene {
  private eventHandlers: Map<string, Function>;
  
  create() {
    this.eventHandlers = new Map();
    this.setupEvents();
  }
  
  private setupEvents() {
    const onPlayerAttack = () => this.handlePlayerAttack();
    this.events.on("player-attack", onPlayerAttack);
    this.eventHandlers.set("player-attack", onPlayerAttack);
  }
  
  cleanup() {
    // Remove all event listeners
    this.eventHandlers.forEach((handler, event) => {
      this.events.off(event, handler);
    });
    this.eventHandlers.clear();
  }
  
  shutdown() {
    this.cleanup();
  }
}
```

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³

```typescript
// âŒ à¸«à¹‰à¸²à¸¡à¸¥à¸·à¸¡ remove event listeners
create() {
  this.events.on("player-attack", () => {
    // ...
  });
  // à¹„à¸¡à¹ˆà¸¡à¸µ cleanup = memory leak
}
```

### 3. Texture Management

#### âœ… à¸•à¹‰à¸­à¸‡à¸—à¸³

```typescript
// à¹ƒà¸Šà¹‰ texture atlas
this.load.atlas(
  "game-sprites",
  "/sprites/atlas.png",
  "/sprites/atlas.json"
);

// à¹ƒà¸Šà¹‰ sprite sheet
this.load.spritesheet(
  "player-animations",
  "/sprites/player.png",
  { frameWidth: 64, frameHeight: 64 }
);

// Destroy textures à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰à¹à¸¥à¹‰à¸§
this.textures.remove("unused-texture");
```

#### âŒ à¸«à¹‰à¸²à¸¡à¸—à¸³

```typescript
// âŒ à¸«à¹‰à¸²à¸¡à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¹à¸¢à¸à¸—à¸µà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œ
this.load.image("sprite1", "/sprite1.png");
this.load.image("sprite2", "/sprite2.png");
// ... 100 files
```

---

## ğŸ§ª Testing Rules

### 1. à¸•à¹‰à¸­à¸‡à¸—à¸”à¸ªà¸­à¸šà¸šà¸™à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸ˆà¸£à¸´à¸‡

#### âœ… Checklist

- [ ] à¸—à¸”à¸ªà¸­à¸šà¸šà¸™ iPhone (Safari)
- [ ] à¸—à¸”à¸ªà¸­à¸šà¸šà¸™ Android (Chrome)
- [ ] à¸—à¸”à¸ªà¸­à¸šà¸šà¸™ iPad
- [ ] à¸—à¸”à¸ªà¸­à¸šà¸šà¸™ Desktop
- [ ] à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¸«à¸¡à¸¸à¸™à¸«à¸™à¹‰à¸²à¸ˆà¸­
- [ ] à¸—à¸”à¸ªà¸­à¸š touch input
- [ ] à¸—à¸”à¸ªà¸­à¸š safe areas
- [ ] à¸—à¸”à¸ªà¸­à¸š performance

### 2. à¸•à¹‰à¸­à¸‡à¸—à¸”à¸ªà¸­à¸š Edge Cases

```typescript
// à¸—à¸”à¸ªà¸­à¸š boundary conditions
function takeDamage(amount: number) {
  // âœ… à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ negative HP
  this.hp = Math.max(0, this.hp - amount);
  
  // âœ… à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ overflow
  this.hp = Math.min(this.maxHp, this.hp);
  
  // âœ… à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š death
  if (this.hp <= 0) {
    this.handleDeath();
  }
}

// à¸—à¸”à¸ªà¸­à¸š null/undefined
function getSkill(index: number): Skill | null {
  // âœ… à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š bounds
  if (index < 0 || index >= this.skills.length) {
    return null;
  }
  
  return this.skills[index];
}
```

---

## ğŸ“š Documentation Rules

### 1. à¸•à¹‰à¸­à¸‡ Comment Code à¸—à¸µà¹ˆà¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™

```typescript
/**
 * à¸„à¸³à¸™à¸§à¸“à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¸¢à¸«à¸²à¸¢à¸ˆà¸²à¸à¸à¸²à¸£à¹‚à¸ˆà¸¡à¸•à¸µ
 * @param attacker à¸œà¸¹à¹‰à¹‚à¸ˆà¸¡à¸•à¸µ
 * @param defender à¸œà¸¹à¹‰à¸–à¸¹à¸à¹‚à¸ˆà¸¡à¸•à¸µ
 * @param skill à¸ªà¸à¸´à¸¥à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰
 * @returns à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¸¢à¸«à¸²à¸¢à¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¸‚à¸¶à¹‰à¸™
 */
function calculateDamage(
  attacker: Entity,
  defender: Entity,
  skill: Skill
): number {
  // Base damage from skill
  let damage = skill.baseDamage;
  
  // Apply attacker's attack stat
  damage *= (1 + attacker.attack / 100);
  
  // Apply defender's defense stat
  damage *= (1 - defender.defense / 100);
  
  // Apply random variance (90% - 110%)
  damage *= 0.9 + Math.random() * 0.2;
  
  // Apply elemental effectiveness
  const effectiveness = this.getElementalEffectiveness(
    skill.element,
    defender.element
  );
  damage *= effectiveness;
  
  return Math.floor(damage);
}
```

### 2. à¸•à¹‰à¸­à¸‡à¸¡à¸µ README à¹ƒà¸™à¹à¸•à¹ˆà¸¥à¸° Module

```typescript
/**
 * Battle System Module
 * 
 * à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸°à¸šà¸šà¸à¸²à¸£à¸•à¹ˆà¸­à¸ªà¸¹à¹‰à¹à¸šà¸š turn-based
 * 
 * Features:
 * - Turn management
 * - Damage calculation
 * - Status effects
 * - Victory/defeat conditions
 * 
 * Usage:
 * ```typescript
 * const battleSystem = new BattleSystem(scene);
 * battleSystem.startBattle(player, enemy);
 * ```
 */
export class BattleSystem {
  // ...
}
```

---

## âš ï¸ Common Mistakes to Avoid

### 1. UI à¸—à¸µà¹ˆà¸à¸šà¸šà¹ˆà¸­à¸¢

```typescript
// âŒ à¸œà¸´à¸”
const button = this.add.sprite(100, 100, "button");

// âœ… à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
const centerX = this.cameras.main.centerX;
const centerY = this.cameras.main.centerY;
const button = this.add.sprite(centerX, centerY, "button");
```

### 2. Scale à¸—à¸µà¹ˆà¸à¸šà¸šà¹ˆà¸­à¸¢

```typescript
// âŒ à¸œà¸´à¸”
scale: {
  mode: Phaser.Scale.RESIZE,  // à¸œà¸´à¸”!
}

// âœ… à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
scale: {
  mode: Phaser.Scale.FIT,
  autoCenter: Phaser.Scale.CENTER_BOTH,
  width: 1280,
  height: 720,
}
```

### 3. Memory Leaks à¸—à¸µà¹ˆà¸à¸šà¸šà¹ˆà¸­à¸¢

```typescript
// âŒ à¸œà¸´à¸” - à¹„à¸¡à¹ˆà¸¡à¸µ cleanup
create() {
  this.events.on("event", () => {});
  this.time.addEvent({});
  this.tweens.add({});
}

// âœ… à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ - à¸¡à¸µ cleanup
create() {
  this.setupEvents();
}

shutdown() {
  this.cleanup();
}

cleanup() {
  this.events.removeAllListeners();
  this.time.removeAllEvents();
  this.tweens.killAll();
}
```

---

## âœ… Pre-commit Checklist

à¸à¹ˆà¸­à¸™ commit code à¸•à¹‰à¸­à¸‡à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š:

- [ ] Code à¹ƒà¸Šà¹‰ TypeScript (à¹„à¸¡à¹ˆà¸¡à¸µ any)
- [ ] Code à¸›à¸à¸´à¸šà¸±à¸•à¸´à¸•à¸²à¸¡ UI_RULES.md
- [ ] Code à¸£à¸­à¸‡à¸£à¸±à¸šà¸¡à¸·à¸­à¸–à¸·à¸­
- [ ] Code à¹ƒà¸Šà¹‰ responsive positioning
- [ ] Code à¹ƒà¸Šà¹‰ safe zones
- [ ] Code à¸¡à¸µ proper cleanup
- [ ] Code à¸¡à¸µ comments à¸—à¸µà¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™
- [ ] Code à¸œà¹ˆà¸²à¸™ linter
- [ ] à¸—à¸”à¸ªà¸­à¸šà¸šà¸™à¸¡à¸·à¸­à¸–à¸·à¸­à¹à¸¥à¹‰à¸§
- [ ] à¹„à¸¡à¹ˆà¸¡à¸µ console.log à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™

---

## ğŸ“ à¸ªà¸£à¸¸à¸›

AI à¸•à¹‰à¸­à¸‡:

1. âœ… à¹ƒà¸Šà¹‰ Phaser 3 + Next.js + TypeScript
2. âœ… à¸£à¸­à¸‡à¸£à¸±à¸šà¸¡à¸·à¸­à¸–à¸·à¸­à¹€à¸ªà¸¡à¸­
3. âœ… à¹ƒà¸Šà¹‰ responsive design
4. âœ… à¸›à¸à¸´à¸šà¸±à¸•à¸´à¸•à¸²à¸¡ UI_RULES.md
5. âœ… à¹€à¸‚à¸µà¸¢à¸™ code à¸—à¸µà¹ˆ maintain à¹„à¸”à¹‰
6. âœ… Optimize performance
7. âœ… Document code à¸—à¸µà¹ˆà¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™
8. âœ… à¸—à¸”à¸ªà¸­à¸šà¸šà¸™à¸­à¸¸à¸›à¸à¸£à¸“à¹Œà¸ˆà¸£à¸´à¸‡

**à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸**: à¸à¸à¹€à¸«à¸¥à¹ˆà¸²à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸šà¸±à¸‡à¸„à¸±à¸š à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸„à¸³à¹à¸™à¸°à¸™à¸³ à¸à¸²à¸£à¸¥à¸°à¹€à¸¡à¸´à¸”à¸ˆà¸°à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸à¸¡à¹„à¸¡à¹ˆà¸—à¸³à¸‡à¸²à¸™à¸šà¸™à¸¡à¸·à¸­à¸–à¸·à¸­
